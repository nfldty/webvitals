(()=>{var U=Object.create;var v=Object.defineProperty;var C=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var P=Object.getPrototypeOf,H=Object.prototype.hasOwnProperty;var J=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,i)=>(typeof require<"u"?require:t)[i]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var W=(e,t,i,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of M(t))!H.call(e,n)&&n!==i&&v(e,n,{get:()=>t[n],enumerable:!(o=C(t,n))||o.enumerable});return e};var $=(e,t,i)=>(i=e!=null?U(P(e)):{},W(t||!e||!e.__esModule?v(i,"default",{value:e,enumerable:!0}):i,e));var m=window||global,E=document.querySelector("script[data-webvitals-widget]");if(E){let e=E.getAttribute("data-user-id");s().userId=e,console.log("Webvitals initialized with user: ",e)}function z(e){let t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=i.length,n=0;for(;n<e;)t+=i.charAt(Math.floor(Math.random()*o)),n+=1;return t}function s(){return m.webvitals||(m.webvitals={}),m.webvitals}async function O(e,t,i,o,n){return s().io||(s().io=(await import("https://cdn.socket.io/4.7.2/socket.io.esm.min.js")).io),s().socket&&s().socket.connected||(sessionStorage["webvitals-session-id"]||(sessionStorage["webvitals-session-id"]=z(32)),s().userId=1,s().socket=s().io(e,{auth:{session_id:sessionStorage["webvitals-session-id"],user_id:s().userId}}),i&&s().socket.on("connect",()=>i(s().socket)),t&&s().socket.on("message",p=>t(p)),o&&s().socket.on("disconnect",o),n&&s().socket.on("connect_error",n)),s().socket}async function c(e,t){console.log("sending",e,t);let i=await O("http://localhost:5000",null,null,null,null);e&&t&&i.emit(e,t)}function g(){let e=document.querySelectorAll("img"),t=[];e.forEach((i,o)=>{let n={};(!i.hasAttribute("alt")||i.getAttribute("alt").trim()==="")&&(n.altMissing=`Image at index ${o} is missing an alt attribute or it is empty.`),i.hasAttribute("role")||(n.ariaRoleMissing=`Image at index ${o} is missing an ARIA role attribute.`),Object.keys(n).length>0&&t.push(n)}),t.length>0&&j(t)}async function j(e){await c("accessibility_report",{issues:e}),accessibilityIssues.forEach(t=>{console.log(t)})}window.addEventListener("load",()=>{g()});function D(){let e=0,t=1e3,i=[],o=3,n=1e3,p=2e3;function I(l,r){let u=Date.now();u-e>=t&&(c("mouse_move",{x:l,y:r,timestamp:u}),e=u)}function R(l,r){c("rage_click",{x:l,y:r,timestamp:Date.now()})}function A(){c("quick_back",{timestamp:Date.now()})}document.addEventListener("mousemove",function(l){let r=l.clientX,u=l.clientY;I(r,u)}),document.addEventListener("click",function(l){let r=Date.now();i.push(r),i=i.filter(u=>r-u<=n),i.length>=o&&(console.log("Rage click detected"),R(l.clientX,l.clientY),i=[])}),window.addEventListener("pageshow",function(l){if(l.persisted||performance.getEntriesByType("navigation")[0].type==="back_forward"){let r=Date.now();window.lastPageLeave&&r-window.lastPageLeave<p&&(console.log("Quick back detected"),A())}}),window.addEventListener("pagehide",function(){window.lastPageLeave=Date.now()})}function w(){let e=Date.now(),t=0;document.addEventListener("visibilitychange",()=>{document.hidden?t=Date.now()-e:e=Date.now()}),window.addEventListener("beforeunload",()=>{t=Date.now()-e,console.log("sending",t),c("time_tracker",{time_spent:t})})}w();function h(){return{fullUrl:window.location.href,origin:window.location.origin,pathname:window.location.pathname}}function L(){let e=h();c("page_visit",{page_url:e.fullUrl}),window.addEventListener("popstate",function(){let t=h();storeUrlDetails(t),c("page_visit",{page_url:t.fullUrl})}),document.body.addEventListener("click",function(t){if(t.target.tagName==="A"&&t.target.href&&new URL(t.target.href).origin===window.location.origin){t.preventDefault(),history.pushState({},"",t.target.href);let i=h();storeUrlDetails(i),console.log("sending",i.fullUrl),c("page_visit",{page_url:i.fullUrl})}})}var _=Date.now(),x=window.location.href;function S(){function e(){c("user_journey",{page_url:x,time_spent:Date.now()-_}),_=Date.now(),x=window.location.href}window.addEventListener("beforeunload",function(){e()}),window.addEventListener("popstate",function(){e()}),document.body.addEventListener("click",function(t){t.target.tagName==="A"&&t.target.href&&new URL(t.target.href).origin===window.location.origin&&(t.preventDefault(),e(),history.pushState({},"",t.target.href))})}D();w();L();S();g();var a=document.createElement("canvas");a.id="lineCanvas";a.style.position="absolute";a.style.top="0";a.style.left="0";a.style.zIndex="1000";a.style.display="none";document.body.appendChild(a);var d=a.getContext("2d");a.width=window.innerWidth;a.height=window.innerHeight;var y=null,k=null,b=!1,f=document.createElement("div");f.id="virtual-cursor";f.style.display="none";document.body.appendChild(f);var T=document.createElement("style");T.textContent=`
    #virtual-cursor {
        position: absolute;
        width: 15px;
        height: 15px;
        background-color: red;
        border-radius: 50%;
        pointer-events: none;
        z-index: 9999;
    }
    .click-effect {
        position: absolute;
        width: 30px;
        height: 30px;
        background-color: rgba(255, 0, 0, 0.6);
        border-radius: 50%;
        animation: vanish 0.5s forwards;
        pointer-events: none;
        z-index: 9998;
    }
    @keyframes vanish {
        0% {
            transform: scale(1);
            opacity: 1;
        }
        100% {
            transform: scale(3);
            opacity: 0;
        }
    }
`;document.head.appendChild(T);window.addEventListener("message",function(e){if(e.origin!=="http://localhost:5000")return;let t=e.data;t.type==="event"&&q(t.event)});function q(e){f.style.display="block",a.style.display="block",e.type==="mousemove"?B(e.x,e.y):e.type==="click"&&K(e.x,e.y)}function B(e,t){f.style.left=`${e}px`,f.style.top=`${t}px`,y!==null&&k!==null&&!b&&N(y,k,e,t),y=e,k=t}function K(e,t){a.style.display="none",b=!0;let i=document.createElement("div");i.classList.add("click-effect"),i.style.left=`${e-15}px`,i.style.top=`${t-15}px`,document.body.appendChild(i),setTimeout(()=>{i.remove(),a.style.display="block",b=!1},500);let o=document.elementFromPoint(e,t);if(o){let n=new Event("click",{bubbles:!0,cancelable:!0});o.dispatchEvent(n)}}function N(e,t,i,o){d.lineWidth=2,d.strokeStyle="rgba(255, 0, 0, 0.6)",d.lineJoin="round",d.beginPath(),d.moveTo(e,t),d.lineTo(i,o),d.stroke(),setTimeout(()=>{d.clearRect(0,0,a.width,a.height)},100)}function V(){f.style.display="none",a.style.display="none"}window.addEventListener("message",function(e){e.data.type==="stop"&&V()});})();
